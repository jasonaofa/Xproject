# Git快速重置功能使用指南

## 功能概述

"重置更新仓库"按钮现在具备了快速重置Git本地仓库的功能，通过执行两个核心Git命令来快速清理工作目录。

## 功能特点

### ⚡ 快速重置
- **清理未跟踪文件**：执行 `git clean -f` 删除所有未跟踪的文件
- **硬重置到当前分支**：执行 `git reset --hard 当前分支名` 重置所有更改
- **操作简单快速**：只执行两个核心命令，速度很快
- **保持当前分支**：不会切换分支，只在当前分支上重置

### ⚠️ 安全确认
- **确认对话框**：操作前会显示详细的警告信息
- **明确操作说明**：清楚显示将执行的Git命令
- **用户确认**：必须手动确认才能执行重置操作

## 使用步骤

### 1. 设置Git仓库路径
确保在"配置设置"选项卡中正确设置了Git仓库路径。

### 2. 点击"重置更新仓库"按钮
在主界面中找到"重置更新仓库"按钮并点击。

### 3. 确认快速重置操作
系统会显示确认对话框，包含以下信息：
```
此操作将快速重置Git本地仓库，包括：

• 清理所有未跟踪的文件 (git clean -f)
• 硬重置到当前分支 (git reset --hard 分支名)

⚠️ 警告：此操作会丢失未提交的更改！确定要继续吗？
```

### 4. 执行重置
- 点击"是"确认执行重置操作
- 点击"否"取消重置操作

### 5. 查看结果
重置完成后，系统会：
- 在日志区域显示操作结果
- 在结果区域显示详细信息
- 自动刷新分支信息
- 显示成功或失败的消息框

## 技术实现

### Git命令序列
快速重置操作按以下顺序执行Git命令：

1. **`git clean -f`** - 清理所有未跟踪的文件
2. **`git reset --hard [当前分支名]`** - 硬重置到当前分支

### 与完整重置的区别
**快速重置（当前版本）：**
- ✅ 速度快，只执行2个命令
- ✅ 清理未跟踪文件
- ✅ 重置所有本地更改
- ❌ 不从远程拉取最新代码
- ❌ 不切换到远程分支状态

**完整重置（之前版本）：**
- ❌ 速度慢，执行7个命令
- ✅ 从远程获取最新更新
- ✅ 强制同步到远程分支
- ✅ 清理Git引用

### 错误处理
- 检查Git仓库路径有效性
- 验证当前分支状态
- 捕获并报告所有Git命令错误
- 提供详细的错误信息

## 使用场景

### 🎯 适用情况
- **快速清理工作目录**：有临时文件需要清理
- **撤销本地更改**：丢弃所有未提交的修改
- **重置到干净状态**：快速恢复到当前分支的干净状态
- **开发过程中的快速重置**：频繁的开发测试中需要快速重置

### ❌ 不适用情况
- **需要最新远程代码**：此操作不会从远程拉取最新代码
- **有重要未提交更改**：会丢失所有本地修改
- **需要切换分支**：此操作不会切换分支

## 注意事项

### ⚠️ 重要警告
1. **数据丢失风险**：此操作会永久删除所有本地未提交的更改
2. **不会更新远程代码**：只重置到当前分支状态，不拉取远程更新
3. **不可撤销**：重置后无法恢复被删除的本地修改

### 💡 建议
1. **备份重要更改**：重置前手动备份重要的本地修改
2. **确认当前分支**：确保在正确的分支上执行重置
3. **如需最新代码**：重置后手动执行 `git pull` 获取最新远程代码

## 故障排除

### 常见错误及解决方案

#### 1. "Git仓库路径无效"
- **原因**：Git仓库路径未设置或路径不存在
- **解决**：在配置设置中正确设置Git仓库路径

#### 2. "无法获取当前分支"
- **原因**：不在Git仓库中或仓库损坏
- **解决**：确保路径指向有效的Git仓库

#### 3. "清理未跟踪文件失败"
- **原因**：文件被占用或权限不足
- **解决**：关闭占用文件的程序，检查文件权限

#### 4. "重置到分支失败"
- **原因**：Git仓库状态异常或分支不存在
- **解决**：检查Git仓库状态和分支名称

## 性能对比

### 快速重置 vs 完整重置

| 特性 | 快速重置 | 完整重置 |
|------|----------|----------|
| **执行时间** | ~1-2秒 | ~10-30秒 |
| **命令数量** | 2个 | 7个 |
| **网络依赖** | 无 | 需要 |
| **远程同步** | 否 | 是 |
| **适用场景** | 快速清理 | 完全同步 |

## 更新日志

### v1.2.0 (当前版本)
- ✅ 优化为快速重置模式
- ✅ 只执行核心的2个Git命令
- ✅ 大幅提升重置速度
- ✅ 更新确认对话框说明
- ✅ 修复Windows编码问题

### v1.1.0 (之前版本)
- ✅ 添加完整的Git重置功能
- ✅ 实现安全确认对话框
- ✅ 增加详细的操作日志
- ✅ 自动刷新分支信息
- ✅ 完善错误处理机制

---

**注意**：快速重置只会清理本地更改，不会从远程获取最新代码。如果需要最新的远程代码，请在重置后手动执行拉取操作。 